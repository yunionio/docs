---
title: "反亲和组"
weight: 40
---

反亲和组是针对反亲和组中虚拟机的简单调度策略，根据反亲和组中的策略将属于反亲和组中新创建的虚拟机分布在不同宿主机上，从而实现业务的高可用。一般用于某个系统中要求系统中的各个节点部署在不同宿主机上的场景。

## 界面操作

### 创建反亲和组

该功能用于创建反亲和组。

{{% alert title="说明" %}}
- 用户在管理后台创建的反亲和组所属项目为default域的system项目。
- 用户在项目中创建反亲和组时，反亲和组所属项目为用户所在项目。
{{% /alert %}}

1. 在反亲和组页面，单击列表上方 **_"新建"_** 按钮，弹出创建反亲和组对话框。
2. 设置以下参数：
    - 指定项目：选择反亲和组的所属项目。
    - 名称：反亲和组的名称。
    - 策略：包括强制和非强制。
        - 强制即强制要求属于同一反亲和组的虚拟机必须按照粒度分布在不同宿主机。不当宿主机上的虚拟机数量超过粒度后创建新虚拟机会失败。
        - 非强制即尽可能的将属于同一反亲和组的虚拟机按照粒度分布在不同宿主机，当宿主机上的虚拟机数量超过粒度后也可以创建。
    - 粒度：反亲和组内虚拟机可以在同一宿主机存在的数量。
3. 单击 **_"确定"_** 按钮，创建反亲和组。


### 加入反亲和组

该功能用于将虚拟机加入反亲和组。仅{{<oem_name>}}平台的虚拟机支持加入反亲和组功能。

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-加入反亲和组"_** 菜单项，弹出加入反亲和组对话框。
2. 选择反亲和组（仅显示与虚拟机同项目的反亲和组），单击 **_"确定"_** 按钮。

### 关联虚拟机

该功能支持将已创建的虚拟机加入反亲和组，仅支持选择与反亲和组处于同一项目的虚拟机。已创建的虚拟机加入反亲和组后所属宿主机不会改变。当反亲和组处于禁用状态时不支持绑定主机操作。

1. 在反亲和组页面，单击反亲和组右侧操作列 **_"关联虚拟机"_** 按钮，弹出绑定主机对话框。
2. 选择需要绑定的虚拟机，单击 **_"确定"_** 按钮。

### 启用

该功能用于启用"禁用"状态的反亲和组。只有反亲和组处于"启用"状态才可以被用户选择使用。

1. 单击"禁用"状态的反亲和组右侧操作列 **_"启用"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，启用反亲和组。

### 禁用

该功能用于禁用"启用"状态的反亲和组。

1. 单击"启用"状态的反亲和组右侧操作列 **_"禁用"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，禁用反亲和组。

### 删除反亲和组

该功能用于删除反亲和组，当绑定主机数量为0时才可以删除反亲和组。

**单个删除**

1. 在反亲和组页面，单击反亲和组操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在反亲和组列表中勾选一个或多个反亲和组，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。