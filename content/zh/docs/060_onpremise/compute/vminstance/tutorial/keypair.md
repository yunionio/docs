---
title: "密码密钥"
date: 2019-07-19T17:38:36+08:00
weight: 6
---

## 界面操作

### 重置密码

该功能用于更新虚拟机上的管理员用户的密码，管理员密码在Linux系统下为root用户的密码、Windows操作系统下为administrator用户的密码。

{{% alert title="注意" color="warning" %}}
- AWS平台的虚拟机不支持重置密码；
- OpenStack、ZStack、DStack、Azure、UCloud平台的虚拟机在运行状态下支持重置密码操作；
- 在{{<oem_name>}}、VMware、阿里云、华为云、腾讯云、Google、天翼云平台的虚拟机在关机状态下支持重置密码操作；
- 绑定密钥的虚拟机无法进行重置密码操作。
- 通过ISO启动方式创建的{{<oem_name>}}平台虚拟机不支持重置密码操作。
{{% /alert %}}

**单个虚拟机重置密码**

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择 **_"密码密钥-重置密码"_** 菜单项，弹出重置密码对话框。
2. 设置管理员密码。
    - 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。
    - 手工输入：可手动设置管理员密码。
3. 默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

**批量重置密码**

批量重置密码选择的虚拟机需要属于同一平台。

1. 在虚拟机列表中选择一个或多个同一平台的虚拟机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"密码密钥-重置密码"_** 菜单项，弹出重置密码对话框。
2. 设置管理员密码。
    - 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。
    - 手工输入：可手动设置管理员密码。
3. 默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。


{{% alert title="注意" color="warning" %}}
若华为云平台的虚拟机重置密码不生效，原因是虚拟机上未安装一键式重置密码插件，请按照[安装方法](https://support.huaweicloud.com/usermanual-ecs/zh-cn_topic_0068095385.html)安装插件。用户如需在华为云平台使用自定义镜像时，需要在自定义镜像中安装一键式重置密码插件。
{{% /alert %}}

### 绑定密钥

该功能用于为虚拟机绑定密钥，密钥绑定后用户需要使用私钥登录虚拟机，或通过私钥在云管平台上获取虚拟机密码。在绑定密钥之前请创建密钥。一个虚拟机只支持绑定一个密钥，当绑定密钥后，用户在虚拟机列表的密码列无法直接看到密码信息，需要输入私钥内容获取密码。

{{% alert title="注意" color="warning" %}}
- AWS和华为云、天翼云平台的虚拟机不支持绑定密钥。
- ZStack、DStack、Azure平台的虚拟机支持在运行状态绑定密钥。
- 其他平台的虚拟机需要在关机状态下绑定密钥。
- 通过ISO启动方式创建的{{<oem_name>}}平台虚拟机不支持绑定密钥操作。
- OpenStack平台仅新建虚拟机时支持绑定密钥，已创建的虚拟机不支持绑定密钥。
{{% /alert %}}

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择 **_"密码密钥-绑定密钥"_** 菜单项，弹出绑定密钥对话框。
2. 选择密钥对，默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，绑定密钥的虚拟机需要使用SSH密钥对登录。

### 解绑密钥
该功能用于将虚拟机与密钥解除绑定。

{{% alert title="注意" color="warning" %}}
OpenStack平台虚拟机解绑密钥后重置密码可能会报错，请手动重置密码。
{{% /alert %}}

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择 **_"密码密钥-解绑密钥"_** 菜单项，弹出绑定密钥对话框。
2. 默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

## Climc

### 重装密码

```bash
$ climc server-deploy --reset-password --password <your_password> <server_id>
```