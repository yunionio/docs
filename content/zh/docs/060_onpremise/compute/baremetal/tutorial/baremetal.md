---
title: "裸金属其它操作"
date: 2019-07-19T20:25:05+08:00
weight: 20
---

## 界面操作

### 远程终端

该功能支持使用SOL（Serial over LAN）和ssh远程连接到裸金属服务器。SOL即通过串口进行远程连接。连接之后需要使用初始账号列中的用户名和密码进行登录。

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"远程终端"_** 按钮，选择下拉菜单 **_"SOL远程终端"_** 菜单项，通过SOL方式与裸金属服务器建立连接。
2. 单击裸金属服务器右侧操作列 **_"远程终端"_** 按钮，选择下拉菜单 **_"SSH IP地址"_** 菜单项，与裸金属服务器建立web SSH连接。
3. 单击裸金属服务器右侧操作列 **_远程终端_** 按钮，选择下拉菜单 **_"SSH IP地址:任意端口"_** 菜单项，在弹出的对话框中设置端口号，单击 **_"确定"_** 按钮，与裸金属服务器建立web SSH连接。
4. 单击裸金属服务器右侧操作列 **_"远程终端"_** 按钮，选择下拉菜单 **_"Java控制台"_** 菜单项，下载并打开jnlp文件，连接裸金属服务器。

### 实例状态

#### 开机

该功能用于将处于关机状态的裸金属服务器开机。

**单个裸金属开机**

1. 在裸金属页面，单击“关机”状态的裸金属右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"开机"_** 菜单项，启动裸金属服务器。

**批量开机**

1. 在裸金属列表中选择一个或多个“关机”裸金属，单击列表上方 **_"开机"_** 按钮，批量启动多个裸金属设备。

#### 关机

该功能用于将处于开机状态的裸金属服务器关机。

**单个裸金属关机**

1. 在裸金属页面，单击“开机”状态的裸金属右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"关机"_** 菜单项，弹出操作确认对话。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量关机**

1. 在裸金属列表中选择一个或多个“开机”裸金属，单击列表上方 **_"关机"_** 按钮，弹出操作确认对话。
2. 单击 **_"确定"_** 按钮，完成操作。

#### 重启

该功能用于重启开机状态的裸金属服务器。


**单个裸金属重启**

1. 在裸金属页面，单击“开机”状态的裸金属右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"重启"_** 菜单项，弹出操作确认对话框。
2. 选择是否勾选强制重启，单击 **_"确定"_** 按钮。

**批量重启**

1. 在裸金属列表中选择一个或多个“开机”裸金属，单击列表上方 **_"重启"_** 按钮，弹出操作确认对话框。
2. 选择是否勾选强制重启，单击 **_"确定"_** 按钮。

{{% alert title="注意" color="warning" %}}
若勾选“强制重启”，裸金属中未保存数据将会丢失。
{{% /alert %}}

### 实例设置

#### 修改属性

该功能用于修改裸金属服务器的启动介质、引导方式以及是否启用删除保护。

**单个裸金属修改属性**

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"修改属性"_** 菜单项，弹出修改属性对话框。
2. 设置删除保护，禁用删除保护后，可删除裸金属服务器。启用删除保护后，无法删除裸金属服务器。
3. 单击 **_"确定"_** 按钮，完成操作。

**多个裸金属批量修改属性**

1. 在裸金属服务器列表中勾选一个或多个裸金属服务器，单击列表上方 **_"更多"_** 按钮，选择下拉菜单 **_"修改属性"_** 菜单项，弹出修改属性对话框。
2. 设置删除保护，禁用删除保护后，可删除裸金属服务器。启用删除保护后，无法删除裸金属服务器。
3. 单击 **_"确定"_** 按钮，完成操作。

#### 重装系统

该功能用于为裸金属服务器更换系统。

{{% alert title="注意" color="warning" %}}
仅在裸金属服务器关机状态下支持重装系统操作。
{{% /alert %}}

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"重装系统"_** 菜单项，弹出重装系统对话框。
2. 选择系统镜像，可分别从公共镜像或自定义镜像中选择同操作系统的镜像。
3. 设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。
    - 随机生成：随机生成管理员密码，用户可在裸金属列表密码列查看复制管理员密码。
    - 关联密钥：在关联密钥之前需要先新建密钥。关联密钥后，用户需要使用私钥远程登录裸金属服务器。
    - 保留镜像设置：管理员密码为镜像中已有的管理员密码。
    - 手工输入：可手动设置管理员密码。
4. 默认勾选“重装系统后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

#### 同步状态

当虚拟机被恶意破坏或经非法暴力操作，导致服务状态异常（如系统死机），需要管理员后台修复，同步虚拟机环境状态，提供系统级服务修复措施。或者在资源超配情况下，同步运行状态。

**单个同步状态**

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"同步状态"_** 菜单项，同步裸金属状态。

**批量同步状态**

1. 在裸金属服务器列表中勾选一个或多个裸金属服务器，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"同步状态"_** 菜单项，同步裸金属状态。


#### 更改项目

项目是资源的拥有者，当裸金属服务器属于某项目后，项目中的所有成员都有权限使用该裸金属服务器。可根据具体使用需求更改裸金属服务器所属的项目。

**单个裸金属更改项目**

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和域下的项目后，单击 **_"确定"_** 按钮，完成操作。

**批量更改项目**

批量更改项目要求选择的裸金属服务器属于同一个域。

1. 在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和域下的项目后，单击 **_"确定"_** 按钮，完成操作。

#### 创建相同配置

该功能用于创建相同配置的裸金属服务器。

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"创建相同配置"_** 菜单项，弹出创建相同配置对话框。
2. 输入名称，设置数量，其他参数可保持默认，单击 **_"确定"_** 按钮。

### 密码密钥

#### 重置密码

该功能用于更新裸金属服务器上的管理员用户的密码，管理员密码在Linux系统下为root用户的密码。

{{% alert title="注意" color="warning" %}}
- 仅在裸金属服务器关机状态下支持重置密码操作。
- 绑定密钥的裸金属服务器无法进行重置密码操作。
- 通过ISO启动方式创建的裸金属不支持重置密码操作。
{{% /alert %}}

**单个裸金属重置密码**

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"重置密码"_** 菜单项，弹出重置密码对话框。
2. 设置管理员密码。
    - 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。
    - 手工输入：可手动设置管理员密码。
3. 默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

**批量重置密码**

1. 在裸金属列表中勾选一个或多个关机状态的裸金属服务器，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"重置密码"_** 菜单项，弹出重置密码对话框。
2. 设置管理员密码。
    - 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。
    - 手工输入：可手动设置管理员密码。
3. 默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

#### 绑定密钥

该功能用于为裸金属服务器绑定密钥，密钥绑定后用户需要使用私钥登录裸金属服务器，或通过私钥在云管平台上获取裸金属服务器的密码。在绑定密钥之前请创建密钥。一个裸金属服务器只支持绑定一个密钥，当绑定密钥后，用户在裸金属列表的密码列无法直接看到密码信息，需要输入私钥内容获取密码。

{{% alert title="注意" color="warning" %}}
- 仅在裸金属服务器关机状态下支持绑定密钥操作。
- 通过ISO启动方式创建的裸金属不支持绑定密钥操作。
{{% /alert %}}

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"绑定密钥"_** 菜单项，弹出绑定密钥对话框。
2. 选择密钥对，默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，绑定密钥的裸金属需要使用SSH密钥对登录。

#### 解绑密钥

该功能用于将裸金属服务器与密钥解除绑定。

{{% alert title="注意" color="warning" %}}
- 仅在裸金属服务器关机状态下支持解绑密钥操作。
- 通过ISO启动方式创建的裸金属不支持解绑密钥操作。
{{% /alert %}}

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"解绑密钥"_** 菜单项，弹出绑定密钥对话框。
2. 默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

### 镜像

#### 挂载ISO

该功能用于为裸金属挂载ISO。仅物理机支持RedFish且可以挂载光驱的物理机支持挂载ISO操作。

{{% alert title="说明" %}}
目前{{<oem_name>}}平台不支持修改裸金属启动介质，已安装操作系统的裸金属挂载ISO镜像后无法直接使用ISO镜像重装系统。
{{% /alert %}}

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"挂载ISO"_** 菜单项，弹出挂载ISO对话框。
2. 选择ISO镜像，若如可用ISO镜像，请在系统镜像列表中上传ISO镜像或导入镜像市场中的ISO镜像。
3. 单击 **_"确定"_** 按钮，完成挂载ISO操作。

#### 卸载ISO

该功能用于卸载物理机上已挂载的ISO镜像。

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"卸载ISO"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成卸载ISO操作。

### 删除

#### 设置删除保护

该功能用于设置裸金属服务器的删除保护。当裸金属服务器启用删除保护后，裸金属服务器无法被删除；当裸金属服务器禁用删除保护后，裸金属服务器才可以被删除。

**单个裸金属设置删除保护**

1. 禁用删除保护：
    - 单击裸金属服务器名称右侧带有![](../../../images/computing/delprotect1.png)图标时，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"禁用"删除保护，单击 **_"确定"_** 按钮。
2. 启用删除保护：
    - 当裸金属服务器名称右侧不带![](../../../images/computing/delprotect1.png)图标时，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"启用"删除保护，单击 **_"确定"_** 按钮。

**批量设置删除保护**

1. 禁用删除保护：
    - 在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"禁用"删除保护，单击 **_"确定"_** 按钮，批量为裸金属禁用删除保护。
2. 启用删除保护：
    - 在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"设置删除保护"_** 菜单项，弹出设置删除保护对话框。
    - 选择"启用"删除保护，单击 **_"确定"_** 按钮，批量为裸金属启用删除保护。

#### 删除

当裸金属服务器名称项右侧有![](../../../images/computing/delprotect1.png)图标，表示该裸金属服务器启用了删除保护，无法删除裸金属服务器。如需要删除裸金属服务器，则需要先禁用删除保护再删除裸金属服务器。

**单个删除**

1. 在裸金属页面，单击裸金属服务器右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"删除"_** 菜单项，弹出操作确认对话框。
2. 单击 **_"确定"_** 按钮，完成操作。

## Climc

### 查询裸金属服务器

```bash
climc server-list --hypervisor baremetal
climc server-show <server_id>
```

### 重装操作系统

```bash
climc server-rebuild --image <image_id> <server_id>
```

### 开/关机

```bash
climc server-start <server_id>
climc server-stop <server_id>
```

### 删除裸金属服务器

删除 server 裸金属服务器会销毁物理机上的操作系统和 raid 配置，对应的 baremetal 重新进入未分配状态

```bash
climc server-delete <server_id>
```
