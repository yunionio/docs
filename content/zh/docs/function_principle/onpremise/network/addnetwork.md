---
title: "如何在平台添加宿主机网络"
weight: 100
description: >
   介绍如何在平台添加宿主机网络。
---

当用户部署环境时使用了千兆网络，后续扩展环境部署了万兆网络绑定等，下面介绍如何将该万兆网络加入到平台。

## 新建万兆的二层网络

1. 在网络-二层网络页面，单击列表上方 **_"新建"_** 按钮，弹出新建新建对话框。
2. 设置以下信息：
   - 指定域：选择二层网络的所属域。
   - 专有网络：选择本地区域以及本地VPC。
   - 可用区：选择二层网络属于的可用区。
   - 名称：设置二层网络的名称，例如wire10g。
   - 带宽：设置二层网络支持的网络带宽，包括百兆（100M）、千兆（1G）、双千兆（2x1G）、万兆（10G）、双万兆（2x10G）、25G、40G、100G。二层网络带宽主要为了统计网络利用率，来确定虚拟机的网络负载情况。
3. 单击 **_"确定"_** 按钮。

## 修改宿主机配置

默认宿主机以网卡对应二层网络，所以需要在宿主机上配置网卡与二层网络的对应关系。

```bash
# 在宿主机上操作
$ vi /etc/yunion/host.conf
# 在networks下添加
networks 
- eth0/br0/192.168.1.1
- bond1/br1/wire10g
```
配置完成后，需要重启host服务。

```bash
# 找到该宿主机对应的host服务
$ kubectl get pods -n onecloud -o wide |grep host
# 如pod名称为default-host-zgrkg
$ kubectl delete pods -n onecloud default-host-zgrkg

```
## 创建IP子网

在上面创建的二层网络wire10g下创建IP子网，后续创建虚拟机使用这些IP子网，则将自动接入万兆网络。
