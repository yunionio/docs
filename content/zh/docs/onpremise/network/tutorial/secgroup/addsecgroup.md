---
title: "新建安全组和规则"
weight: 10
description: >
 介绍如何新建安全组以及在安全组下添加规则。
---

安全组及规则添加顺序一般为先新建安全组，并在安全组内添加出入方向的规则列表。

## 新建安全组

目前内置三种安全组模板：

- 通用Web服务器：创建放通22，80，443，3389端口和ICMP协议的安全组规则。
- 开放所有端口：创建放通所有端口的安全组规则。
- 自定义：默认不设置任何规则，等安全组创建完成后，用户自定义设置安全组规则。

1. 在安全组页面，单击列表上方 **_"新建"_** 按钮，弹出新建对话框。
2. 选择指定项目、模板、设置安全组名称，单击 **_"确定"_** 按钮，完成安全组的创建。	

## 批量追加规则

该功能用于批量为多个安全组添加相同规则。

1. 在安全组列表中选择一个或多个安全组，单击 **_"批量追加规则"_** 按钮，弹出批量追加规则对话框。
2. 配置以下参数：
    - 设置规则方向，包括“入方向”或“出方向”。
    - 选择类型，包括自定义、微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping。
        - 当选择自定义类型时，需要自定义配置所有参数。
        - 当选择微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping后，将会自动确定规则的协议和端口号（如ping类型，协议为ICMP、端口为ALL）。用户只需要配置目标、策略、优先级即可。
    - 设置来源或目标。
        - 当为入方向创建规则时，设置来源，即访问虚拟机的源IP地址或CIDR。
        - 当为出方向创建规则时，设置目标，即虚拟机访问的目标IP或CIDR网段。
        - 当勾选右下角任意IP时，目标自动设置为0.0.0.0/0。当设置单个IP时，格式为192.168.0.1，当设置CIDR网段时，格式为192.168.1.0/24。
    - 设置协议，目前支持的协议为TCP、UDP、ICMP、任意协议，当选择任意协议时，将匹配所有端口。
    - 设置端口：可设置1~65535之间的任意数值。
    - 设置策略：包括允许和拒绝。
    - 设置优先级：可设置1~100之间的任意数值，数值越大，代表规则的优先级越高，优先生效。
3. 单击 **_"确定"_** 按钮，添加规则，按照上述操作为安全组添加对应规则。

## 配置规则

一般新建的安全组默认显示在第一个。需要用户在新建的安全组详情中设置对应规则。安全组详情页面分为”入方向“、”出方向“两部分。分别控制虚拟机入方向的流量以及出方向的流量。可分别在入方向或出方向创建规则，规则创建方式相同。

### 新建规则 

1. 在安全组页面，单击安全组右侧操作列 **_"配置规则"_** 按钮，进入入方向页面。
2. 分别在“入方向”或“出方向”页面，单击 **_"新建"_** 按钮，弹出新建规则对话框。
3. 配置以下参数：
    - 类型：包括自定义、微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping。
        - 当选择自定义类型时，需要自定义配置所有参数。
        - 当选择微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping后，将会自动确定规则的协议和端口号（如ping类型，协议为ICMP、端口为ALL）。用户只需要配置目标、策略、优先级即可。
    - 来源/目标：设置流量的来源（入方向）或目标（出方向）。支持选择IP地址、CIDR和安全组。
        - IP地址和CIDR：填写单一IP地址或者选择CIDR网段，当勾选右下角任意IP时，目标自动设置为0.0.0.0/0。当设置单个IP时，格式为192.168.0.1，当设置CIDR网段时，格式为192.168.1.0/24。
        - 安全组：选择安全组，所选择的安全组规则不会被添加到当前安全组，而是该安全组绑定虚拟机等资源可以作为来源/目标。目前只针对阿里云和腾讯云平台生效。
    - 协议：目前支持的协议为TCP、UDP、ICMP、任意协议，当选择任意协议时，将匹配所有端口。
    - 端口：可设置1~65535之间的任意数值。
    - 策略：包括允许和拒绝。
    - 优先级：可设置1~100之间的任意数值，数值越大，代表规则的优先级越高，优先生效。
4. 单击 **_"确定"_** 按钮，添加规则，按照上述操作为安全组添加对应规则。

### 编辑规则

该功能用于编辑已有规则。

1. 在安全组页面，单击安全组右侧操作列 **_"配置规则"_** 按钮，进入入方向页面。
2. 单击“入方向”或“出方向”页面规则右侧操作列 **_"编辑"_** 按钮，弹出编辑对话框。
3. 修改协议、策略、优先级等，单击 **_"确定"_** 按钮，完成操作。

### 克隆规则

该功能用于克隆已有规则。

1. 在安全组页面，单击安全组右侧操作列 **_"配置规则"_** 按钮，进入入方向页面。
2. 单击“入方向”或“出方向”页面规则右侧操作列 **_"克隆"_** 按钮，弹出克隆规则对话框。
3. 修改相关参数，单击 **_"确定"_** 按钮，完成操作。

### 删除规则

该功能用于删除规则。支持单个或批量删除规则。

**单个删除**

1. 在安全组页面，单击安全组右侧操作列 **_"配置规则"_** 按钮，进入入方向页面。
2. 单击“入方向”或“出方向”页面规则右侧操作列 **_"删除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。

**批量删除**

1. 在安全组页面，单击安全组右侧操作列 **_"配置规则"_** 按钮，进入入方向页面。
2. 在“入方向”或“出方向”页面中选择一条或多条规则，单击列表上方 **_"删除"_** 按钮，弹出操作确认对话框。
3. 单击 **_"确定"_** 按钮，完成操作。