---
title: "虚拟机实例设置"
date: 2019-07-19T17:38:36+08:00
weight: 4
description: >
  介绍虚拟机一些实例相关的配置操作。
---

## Web界面操作

### 修改属性

该功能用于修改虚拟机的启动介质、引导方式等。批量修改属性操作支持选择不同平台上的虚拟机。

**单个虚拟机修改属性**

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-修改属性"_** 菜单项，弹出修改属性对话框。
2. 修改虚拟机是否启用删除保护，禁用删除保护后，可删除虚拟机。启用删除保护后，无法删除虚拟机。
3. 修改虚拟机的启动介质，选择从硬盘、光驱、网络启动虚拟机。
    - 如挂载ISO后，可选择从光驱启动虚拟机，并进行安装操作系统的操作。
    - 如系统盘已有操作系统，可选择通过硬盘启动虚拟机等。
    - 如设备需要通过网络从远端服务器下载镜像启动，则需要选择通过网络启动虚拟机。
3. 修改虚拟机的引导方式，目前仅{{<oem_name>}}平台上虚拟机支持修改，且ARM架构只支持UEFI引导方式。
4. 单击 **_"确定"_** 按钮，完成操作。

**批量修改属性**

1. 在虚拟机列表中选择一个或多个虚拟机，单击 **_"批量操作"_** 按钮，选择下拉菜单 **_"修改属性"_** 菜单项，弹出修改属性对话框。
2. 修改虚拟机的启动介质，选择从硬盘、光驱、网络启动虚拟机。
    - 如挂载ISO后，可选择从光驱启动虚拟机，并进行安装操作系统的操作。
    - 如系统盘已有操作系统，可选择通过硬盘启动虚拟机等。
    - 如设备需要通过网络从远端服务器下载镜像启动，则需要选择通过网络启动虚拟机。
3. 修改虚拟机的引导方式，目前仅{{<oem_name>}}平台上虚拟机支持修改，且ARM架构只支持UEFI引导方式。
4. 单击 **_"确定"_** 按钮，完成操作。

### 重装系统

该功能用于为虚拟机更换系统。

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-重装系统"_** 菜单项，弹出重装系统对话框。
2. 选择系统镜像，可分别从公共镜像或自定义镜像中选择同操作系统的镜像。
3. 设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。

    - 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。
    - 关联密钥：在关联密钥之前需要先新建密钥。关联密钥后，用户需要使用私钥远程登录虚拟机。
    - 保留镜像设置：管理员密码为镜像中已有的管理员密码。
    - 手工输入：可手动设置管理员密码。

{{% alert title="说明" %}}
根据虚拟机所在平台不同，设置管理员密码的方式可能为以上方式的其中几种，请以界面为准。
{{% /alert %}}

4. 默认勾选“重装系统后自动启动”，可根据需要取消勾选，单击 **_"确定"_** 按钮，完成操作。

### 调整配置

该功能用于修改虚拟机的硬件配置，包括CPU、内存以及硬盘大小等，支持批量操作。

{{% alert title="注意" color="warning" %}}

- 在{{<oem_name>}}平台虚拟机运行状态下CPU和内存大小只允许往上调整；
- ZStack在虚拟机开机状态下不允许调整CPU和内存大小，只支持增加数据盘。
- 阿里云的虚拟机在绑定EIP之后不允许调整虚拟机配置。
- 除阿里云、腾讯云、华为云之外的平台包年包月的虚拟机不支持调整配置。
- 批量调整配置时，仅允许选择同一个平台上的虚拟机。
{{% /alert %}}

**单个虚拟机调整配置**

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-调整配置"_** 菜单项，弹出调整配置对话框。
2. 调整虚拟机的CPU核数、内存以及数据盘，也可根据需求添加新磁盘，若虚拟机在"关机"状态下可勾选“调整配置后自动启动”，单击 **_"确定"_** 按钮。
3. 若开启了工单，则还需要填入申请原因，单击 **_"提交工单"_** 按钮，提交调整配置工单，等待审批通过后才会成功调整配置。

**批量调整配置**

1. 在虚拟机列表中选择一个或多个同一个平台的虚拟机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"调整配置"_** 菜单项，弹出调整配置对话框。
2. 调整虚拟机的CPU核数、内存，若虚拟机在"关机"状态下可勾选“调整配置后自动启动”，单击 **_"确定"_** 按钮。
3. 若开启了工单，则还需要填入申请原因，单击 **_"提交工单"_** 按钮，提交调整配置工单，等待审批通过后才会成功调整配置。
  
### 更改项目

项目是资源的拥有者，当虚拟机属于某项目后，项目中的所有成员都有权限使用该虚拟机。可根据具体使用需求更改虚拟机所属的项目。

**单个虚拟机更改项目**

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和域下的项目后，单击 **_"确定"_** 按钮，完成操作。

**批量更改项目**

批量更改项目要求虚拟机属于同一个域。

1. 在虚拟机列表中选择一个或多个虚拟机，单击列表上方 **_"批量操作"_** 按钮，选择下拉菜单 **_"更改项目"_** 菜单项，弹出更改项目对话框。
2. 选择域和域下的项目后，单击 **_"确定"_** 按钮，完成操作。


### 创建快照

快照是一种数据备份方式，可以在指定时间点对虚拟机的系统盘、数据盘或虚拟机整体创建一个完全可用拷贝，便于虚拟机故障后快速回退到创建快照时的虚拟机状态。

{{% alert title="注意" color="warning" %}}
- 目前UCloud、天翼云平台暂不支持创建快照操作；VMware平台虚拟机仅支持创建主机快照。私有云平台仅支持本地硬盘创建硬盘快照。{{<oem_name>}}平台同时支持创建硬盘快照和主机快照。
- 状态异常的硬盘不支持创建硬盘快照。
- 主机快照占的快照配额数等于主机上的硬盘数，即若主机上有2块硬盘，为该主机创建主机快照所站的快照配额为2。
{{% /alert %}}

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-创建快照"_** 菜单项，弹出新建快照对话框。
2. 选择快照类别。
    - 当选择快照类别为“创建硬盘快照”，选择需要备份的磁盘，设置快照名称，单击 **_"确定"_** 按钮，创建硬盘快照。
    - 当选择快照类别为“创建主机快照”，设置快照名称，单击 **_"确定"_** 按钮，创建主机快照。

### 创建相同配置
该功能用于创建相同配置的虚拟机。

{{% alert title="注意" color="warning" %}}
- VMware、OpenStack、ZStack、DStack平台上虚拟机不支持该操作。
{{% /alert %}}

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-创建相同配置"_** 菜单项，弹出创建相同配置对话框。
2. 输入名称，设置数量，单击 **_"确定"_** 按钮。如创建多个虚拟机，第1个创建的虚拟机名称为设置的名称，第2~N个创建的虚拟机名称为名称- 1~N-1。

### 设置磁盘速度

该功能用于限制磁盘的IOPS，其中IOPS是指单位时间内系统能处理的I/O请求数量，I/O请求通常为读或写数据操作请求。仅{{<oem_name>}}平台上运行状态的虚拟机支持该操作。

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-设置磁盘速度"_** 菜单项，弹出设置磁盘速度对话框。
2. 勾选是否限速，若勾选，设置磁盘最大IOPS，单击 **_"确定"_** 按钮。

### 到期释放

到期释放即设置虚拟机的使用时长，当超过设置期限时，虚拟机将会被自动删除，存放到回收站。

{{% alert title="注意" color="warning" %}}
- 公有云仅按量付费的虚拟机支持到期释放功能。
- 公有云虚拟机放入回收站后仍然收费，如虚拟机不再使用，请在回收站进行清除。
{{% /alert %}}

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-到期释放"_** 菜单项，弹出到期释放对话框。
2. 选择是否勾选到期释放，勾选后设置虚拟机的释放时间，单击 **_"确定"_** 按钮。
    - 单击释放时间输入框，显示日历等内容，支持直接在释放时间输入框中输入日期和时间，格式为yyyy-mm-dd hh:mm:ss，单击 **_"确定"_** 按钮。 
    - 在日历框中选择日期，单击 **_选择时间_** 按钮，将跳转到设置时间界面，选择时间后，单击 **_"确定"_** 按钮。
    - 支持快速选择“1小时”、“2小时”、“3小时”、 “6小时”、 “1天”、“2天”、 “1周”按钮，释放时间将设置为对应时间范围内的时间，单击 **_"确定"_** 按钮。
3. 设置完成后，在计费方式列显示虚拟机还有多久时间释放等信息。
4. 若不再需要到期释放功能，可在虚拟机释放之前，在弹出的到期释放对话框中取消勾选到期释放，单击 **_"确定"_** 按钮。

### 主机克隆

该功能用于根据虚拟机的规格信息克隆出与当前虚拟机系统、配置相同的虚拟机。仅{{<oem_name>}}平台上的运行和关机状态的虚拟机支持主机克隆功能。

当前主机克隆实现原理是基于主机快照创建新的虚拟机，主机克隆过程中会产生主机快照，并占用快照配额，需要用户及时删除无用快照，若当前用户项目不存在快照配额，则将无法使用主机克隆功能。

**单个克隆**

1. 在虚拟机页面，单击虚拟机右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"实例设置-主机克隆"_** 菜单项，弹出主机克隆对话框。
2. 设置名称、数量、克隆方式。
    - 新主机快照克隆：当选择“新主机快照克隆”时，建议勾选“克隆完成后删除本次克隆生成的主机快照”，减少无用主机快照，释放快照配额等，单击 **_"确定"_** 按钮，虚拟机在会创建主机快照并创建与当前虚拟机配置完全相同的虚拟机。
    - 已有主机快照克隆：当选择“已有主机快照克隆”时，需要勾选该虚拟机已创建的主机快照，单击 **_"确定"_** 按钮。使用已有的主机快照克隆的虚拟机与创建快照时刻的虚拟机配置和状态相同，与当前虚拟机状态可能不相同。若用户不需要使用已有主机快照，也可以在该页面删除主机快照，增加快照配额。

**批量克隆**

1. 在虚拟机列表中选择两个及以上虚拟机，单击列表上方**_"批量操作"_** 按钮，选择下拉菜单 **_"实例设置-主机克隆"_** 菜单项，弹出主机克隆对话框。
2. 单击 **_"确定"_** 按钮，批量克隆虚拟机。

