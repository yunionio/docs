---
title: "更换网卡"
weight: 4
description: >
  介绍如何更换物理机的网卡。
---

云平台会记录物理机的网卡信息，如果实际环境中替换了物理机的网卡，需要手动保持平台里面物理机的网卡信息和实际环境中的一致。

## 删掉物理机网卡

假设需要移除物理机 bm1 上 mac 为 52:54:00:12:34:56 的网卡，对应操作如下：

```bash
$ climc host-remove-netif bm1 52:54:00:12:34:56
```

## 添加新的网卡

手动给物理机添加网卡后，同步平台里面的信息有两种方式，一种是让物理机重新 PXE 启动一次，平台对应的硬件信息就会更新，这种方式适用于物理机上没有安装操作系统或者删除了操作系统的情况。

另外一种是使用命令 `host-add-netif` 给物理机添加网卡：

```bash
# 给物理机 bm2 添加 admin 类型的网卡，二层网络为 bcast0 ，MAC 地址为 52:54:00:12:34:56，手动配置 IP 地址为 10.10.10.10
# 网卡顺序为第一张(0)
$ climc host-add-netif --ip-addr 10.10.10.10 --type admin bm2 bcast0 52:54:00:12:34:56 0
```

查看物理机的网卡：

```bash
$ climc host-network-list --details --host bm2
+--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+
|             Baremetal_ID             | Host |              Network_ID              |  Network   |   IP_addr    |     Mac_addr      | Nic_Type |
+--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+
| 610a7133-a2f6-4e52-8b12-2067296863a4 | bm2  | 14f56d88-0a70-404f-872e-56949bf0e488 | pxe-net    | 10.10.10.10  | 52:54:00:12:34:56 | admin    |
| 610a7133-a2f6-4e52-8b12-2067296863a4 | bm2  | 14f56d88-0a70-404f-872e-56949bf0e488 | ipmi-net   | 10.0.2.3     | 30:4e:05:26:22:43 | ipmi     |
+--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+
```
